export function initTheHeaderMenu(e=document){const s={mainLevel:".main-level",openClass:"open",openingClass:"opening",closingClass:"closing",html:document.documentElement,body:document.body,openButton:'[data-js-behavior="openSub"]',closeButton:'[data-js-behavior="closeMenu"]'};let n=null;function t(t,i){if(t)if(i&&i.preventDefault(),window.innerWidth,document.documentElement.clientWidth,t.classList.contains(s.openClass))o(t),s.html.style.overflow="";else{t.classList.add(s.openingClass);const i=e.querySelector(`.${s.openClass}`);i&&i!==t&&o(i),setTimeout(()=>{t.classList.remove(s.openingClass),t.classList.add(s.openClass),s.html.style.overflow="hidden",function(){const e=e=>{"Escape"===e.key&&l(document.activeElement)};s.html.addEventListener("keydown",e),n=e}()},20)}}function o(e){e&&e.classList.contains(s.openClass)&&(e.classList.add(s.closingClass),setTimeout(()=>{e.classList.remove(s.openClass),e.classList.remove(s.closingClass),i()},500))}function l(e){if(!e)return;const n=e.closest(s.mainLevel),t=null==n?void 0:n.querySelector(`.${s.openClass}`);t&&(t.classList.add(s.closingClass),setTimeout(()=>{t.classList.remove(s.openClass),t.classList.remove(s.closingClass),s.html.style.overflow="",i()},500))}function i(){n&&(s.html.removeEventListener("keydown",n),n=null)}!function(){for(const n of e.querySelectorAll(s.openButton))n.addEventListener("click",e=>{t(e.currentTarget,e)});for(const n of e.querySelectorAll(s.closeButton))n.addEventListener("click",e=>{l(e.currentTarget)})}()}