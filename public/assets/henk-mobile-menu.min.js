"use strict";(()=>{const e={name:"mobile-menu",selector:"header.henk-header",get header(){return document.querySelector(this.selector)},get headerInner(){return document.querySelector("header.henk-header > .henk-header__inner")},get hamburgerButtonSelector(){return document.querySelector("[data-js-mobile-menu]")},get closeButtonSelector(){var e,t;return null!==(t=null===(e=this.header)||void 0===e?void 0:e.querySelector(".close-menu"))&&void 0!==t?t:null},removeTrap:null,escListener:null,init(){console.log("Mobile menu init");const e=document.querySelector("header.henk-header");if(!e)return null;e.dataset.state="closed",this.addHamburgerButton(),this.addCloseButton()},addHamburgerButton(){const t=document.createElement("button");t.type="button",t.className="henk-button henk-button--ghost open-menu",t.setAttribute("aria-label","Open menu"),t.setAttribute("aria-expanded","false"),t.dataset.jsMobileMenu="",t.innerHTML='\n<i class="henk-icon icon--only">\n  <svg\n    xmlns="http://www.w3.org/2000/svg"\n    width="24"\n    height="24"\n    viewBox="0 0 24 24"\n    stroke="currentColor"\n    stroke-width="1"\n  >\n    <line x1="0" y1="0.5" x2="24" y2="0.5" />\n    <line x1="0" y1="12" x2="24" y2="12" />\n    <line x1="0" y1="23.5" x2="24" y2="23.5" />\n  </svg>\n</i>\n<span class="visually-hidden">Menu</span>\n    ',this.headerInner&&(this.headerInner.insertAdjacentElement("afterbegin",t),t.addEventListener("click",e.toggleMenu))},addCloseButton(){const t=document.createElement("button");t.type="button",t.className="henk-button henk-button--ghost henk-button--small close-menu",t.setAttribute("aria-label","Close menu"),t.innerHTML='\n      <i class="henk-icon">\n        <svg\n          width="24"\n          height="24"\n          viewBox="0 0 24 24"\n          fill="none"\n          xmlns="http://www.w3.org/2000/svg"\n        >\n          <path\n            d="M23.5 0.5L0.5 23.5M0.5 0.5L23.5 23.5"\n            stroke="currentcolor"\n            stroke-linecap="round"\n            stroke-linejoin="round"\n          ></path>\n        </svg>\n      </i>\n      CLOSE\n    ',t.style.display="none",this.headerInner&&(this.headerInner.insertAdjacentElement("afterbegin",t),t.addEventListener("click",e.toggleMenu))},trapMenuTabbing(){const e=this.header;if(!e)return null;if(!e.querySelector("details[name='main-nav']"))return null;const t=this.closeButtonSelector,n=e.querySelector("[data-js-cart], .henk-cart, [aria-label='Cart'], a[href*='cart']")||t;if(!t||!n)return null;const r=e=>{"Tab"===e.key&&(e.shiftKey||document.activeElement!==n?e.shiftKey&&document.activeElement===t&&(e.preventDefault(),n.focus()):(e.preventDefault(),t.focus()))};return e.addEventListener("keydown",r),()=>{e.removeEventListener("keydown",r)}},addEscListener(){this.escListener||(this.escListener=e=>{"Escape"===e.key&&this.toggleMenu()},document.documentElement.addEventListener("keydown",this.escListener))},removeEscListener(){this.escListener&&(document.documentElement.removeEventListener("keydown",this.escListener),this.escListener=null)},toggleMenu(){var t;if(e.header)if("open"===e.header.dataset.state)e.header.dataset.state="closed",e.hamburgerButtonSelector.setAttribute("aria-expanded","false"),e.closeButtonSelector.style.display="none",e.removeEscListener(),null===(t=e.removeTrap)||void 0===t||t.call(e),e.removeTrap=null,e.closeAllSubs();else{e.header.dataset.state="open",e.hamburgerButtonSelector.setAttribute("aria-expanded","true"),e.closeButtonSelector.style.display="flex",e.closeButtonSelector.focus(),e.addEscListener(),e.removeTrap=e.trapMenuTabbing();const t=e.header.querySelector("details[name='main-nav']");t&&(t.open=!0)}},closeAllSubs(){e.header.querySelectorAll("details[name='main-nav'][open]").forEach(e=>{e.open=!1})},destroy(){var e,t,n,r,o;this.header&&(this.header.dataset.state="closed"),null===(e=this.removeTrap)||void 0===e||e.call(this),this.removeTrap=null,this.removeEscListener(),null===(t=this.hamburgerButtonSelector)||void 0===t||t.removeEventListener("click",this.toggleMenu),null===(n=this.hamburgerButtonSelector)||void 0===n||n.remove(),null===(r=this.closeButtonSelector)||void 0===r||r.removeEventListener("click",this.toggleMenu),null===(o=this.closeButtonSelector)||void 0===o||o.remove(),this.closeAllSubs(),console.log("Mobile menu destroyed")}};document.addEventListener("DOMContentLoaded",()=>{const t=window.matchMedia("(max-width: 767px)");let n=!1;const r=t=>{t.matches&&!n?(e.init(),n=!0):!t.matches&&n&&(e.destroy(),n=!1)};r(t),t.addEventListener("change",r)})})();