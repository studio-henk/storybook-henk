import{c as u}from"./feather-x-PGl1r6Y-.js";const c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>',t={name:"mobile-menu",headerAttr:"[data-js-mobile-menu]",openButtonAttr:"[data-js-mobile-menu-open]",closeButtonAttr:"[data-js-mobile-menu-close]",get header(){return document.querySelector(this.headerAttr)},get headerInner(){return document.querySelector("header.henk-header > .henk-header__inner")},get hamburgerButtonSelector(){return document.querySelector(this.openButtonAttr)},get closeButtonSelector(){return document.querySelector(this.closeButtonAttr)},removeTrap:null,escListener:null,init(){console.log("Mobile menu init");const e=document.querySelector("header.henk-header");if(!e)return null;e.dataset.state="closed",this.addHamburgerButton(),this.addCloseButton()},addHamburgerButton(){const e=document.createElement("button");e.type="button",e.className="henk-button henk-button--ghost henk-header__button--open-menu",e.setAttribute("aria-label","Open menu"),e.setAttribute("aria-expanded","false"),e.dataset.jsMobileMenuOpen="",e.innerHTML=`
<i class="henk-icon icon--only">
${c}
</i>
<span class="visually-hidden">Menu</span>
    `,this.headerInner&&(this.headerInner.insertAdjacentElement("afterbegin",e),e.addEventListener("click",t.toggleMenu))},addCloseButton(){const e=document.createElement("button");e.type="button",e.className="henk-button henk-button--ghost henk-button--small henk-header__button--close-menu",e.setAttribute("aria-label","Close menu"),e.dataset.jsMobileMenuClose="",e.innerHTML=`
            <i class="henk-icon">
                    ${u}
                  </i>
            CLOSE
          `,e.style.display="none",this.headerInner&&(this.headerInner.insertAdjacentElement("afterbegin",e),e.addEventListener("click",t.toggleMenu))},trapMenuTabbing(){const e=this.header;if(!e||!e.querySelector("details[name='main-nav']"))return null;const r=this.closeButtonSelector,i=e.querySelector("[data-js-cart], .henk-cart, [aria-label='Cart'], a[href*='cart']")||r;if(!r||!i)return null;const l=o=>{o.key==="Tab"&&(!o.shiftKey&&document.activeElement===i?(o.preventDefault(),r.focus()):o.shiftKey&&document.activeElement===r&&(o.preventDefault(),i.focus()))};return e.addEventListener("keydown",l),()=>{e.removeEventListener("keydown",l)}},addEscListener(){this.escListener||(this.escListener=e=>{e.key==="Escape"&&this.toggleMenu()},document.documentElement.addEventListener("keydown",this.escListener))},removeEscListener(){this.escListener&&(document.documentElement.removeEventListener("keydown",this.escListener),this.escListener=null)},preventClosingOpenDetailsOnMobile(){t.header&&t.header.dataset.state==="open"&&t.header.querySelectorAll('details[name="main-nav"]').forEach(n=>{const r=n.querySelector("summary");r&&r.addEventListener("click",s=>{window.innerWidth<=767&&n.open&&s.preventDefault()})})},toggleMenu(){var e;if(t.header)if(t.header.dataset.state==="open")t.header.dataset.state="closed",t.hamburgerButtonSelector.setAttribute("aria-expanded","false"),t.closeButtonSelector.style.display="none",t.removeEscListener(),(e=t.removeTrap)==null||e.call(t),t.removeTrap=null,t.closeAllSubs();else{if(!t.header||!t.hamburgerButtonSelector||!t.closeButtonSelector)return;t.header.dataset.state="open",t.hamburgerButtonSelector.setAttribute("aria-expanded","true"),t.closeButtonSelector.style.display="flex",t.closeButtonSelector.focus(),t.addEscListener(),t.removeTrap=t.trapMenuTabbing();const n=t.header.querySelector("details[name='main-nav']");n&&(n.open=!0),t.preventClosingOpenDetailsOnMobile()}},closeAllSubs(){if(!t.header)return;t.header.querySelectorAll("details[name='main-nav'][open]").forEach(n=>{n.open=!1})},destroy(){var e,n,r,s,a;this.header&&(this.header.dataset.state="closed"),(e=this.removeTrap)==null||e.call(this),this.removeTrap=null,this.removeEscListener(),(n=this.hamburgerButtonSelector)==null||n.removeEventListener("click",this.toggleMenu),(r=this.hamburgerButtonSelector)==null||r.remove(),(s=this.closeButtonSelector)==null||s.removeEventListener("click",this.toggleMenu),(a=this.closeButtonSelector)==null||a.remove(),this.closeAllSubs(),console.log("Mobile menu destroyed")},setupMatchMedia(){const e=window.matchMedia("(max-width: 767px)");let n=!1;const r=s=>{s.matches&&!n?(this.init(),n=!0):!s.matches&&n&&(this.destroy(),n=!1)};r(e),e.addEventListener("change",r)}};document.addEventListener("DOMContentLoaded",()=>{t.setupMatchMedia()});
